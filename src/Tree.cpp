#include "Tree.hpp"
static const int pos[] = {
    11, 2,
    11, 5,
    11, 8,
    11, 10,
    11, 12,
    11, 14,
    11, 16,
    11, 18,
    11, 20,
    11, 22,
    11, 24,
    11, 27,
    11, 29,
    11, 30,
    12, 32,
    12, 34,
    12, 36,
    12, 38,
    13, 39,
    13, 42,
    13, 44,
    13, 46,
    13, 48,
    13, 51,
    13, 53,
    13, 55,
    13, 57,
    14, 60,
    14, 62,
    14, 64,
    15, 65,
    15, 67,
    16, 69,
    16, 71,
    16, 72,
    16, 74,
    16, 75,
    17, 77,
    17, 78,
    17, 79,
    17, 81,
    18, 82,
    18, 84,
    19, 85,
    19, 86,
    20, 87,
    20, 87,
    21, 88,
    21, 89,
    22, 89,
    23, 90,
    24, 90,
    25, 91,
    26, 91,
    27, 92,
    27, 92,
    28, 93,
    29, 93,
    30, 93,
    31, 93,
    32, 94,
    33, 94,
    34, 94,
    35, 94,
    36, 94,
    37, 94,
    38, 94,
    39, 94,
    40, 94,
    41, 94,
    42, 94,
    43, 94,
    44, 94,
    45, 94,
    47, 94,
    48, 94,
    49, 94,
    50, 94,
    51, 94,
    52, 94,
    53, 94,
    54, 94,
    55, 94,
    56, 94,
    57, 94,
    58, 94,
    59, 94,
    60, 93,
    61, 93,
    62, 93,
    62, 93,
    63, 93,
    64, 93,
    64, 93,
    65, 93,
    65, 94,
    65, 95,
    64, 95,
    64, 96,
    64, 96,
    64, 97,
    63, 97,
    63, 98,
    62, 98,
    61, 100,
    61, 100,
    60, 100,
    59, 102,
    58, 103,
    57, 103,
    57, 104,
    56, 104,
    55, 105,
    54, 105,
    53, 106,
    52, 106,
    50, 106,
    49, 107,
    48, 107,
    47, 108,
    46, 108,
    45, 110,
    43, 110,
    42, 110,
    42, 111,
    41, 111,
    38, 113,
    37, 113,
    36, 114,
    36, 115,
    35, 116,
    34, 116,
    34, 117,
    34, 118,
    33, 118,
    33, 119,
    33, 120,
    32, 120,
    32, 121,
    32, 122,
    32, 123,
    32, 124,
    32, 125,
    32, 126,
    32, 127,
    32, 128,
    32, 129,
    32, 130,
    32, 131,
    32, 132,
    32, 133,
    32, 134,
    32, 134,
    32, 135,
    32, 137,
    32, 138,
    32, 138,
    32, 139,
    32, 140,
    32, 141,
    32, 141,
    32, 142,
    32, 143,
    33, 145,
    33, 146,
    33, 147,
    34, 148,
    34, 149,
    34, 150,
    34, 151,
    34, 152,
    34, 153,
    34, 155,
    34, 157,
    34, 161,
    35, 163,
    35, 165,
    35, 167,
    35, 168,
    35, 170,
    36, 171,
    36, 172,
    36, 174,
    36, 175,
    36, 177,
    37, 178,
    37, 179,
    37, 180,
    38, 181,
    38, 182,
    38, 184,
    39, 184,
    40, 185,
    41, 185,
    41, 187,
    42, 187,
    43, 187,
    43, 188,
    44, 188,
    45, 188,
    45, 189,
    46, 189,
    46, 189,
    47, 189,
    47, 190,
    48, 190,
    49, 190,
    49, 190,
    50, 190,
    51, 190,
    52, 190,
    52, 190,
    53, 190,
    54, 190,
    55, 190,
    56, 190,
    56, 190,
    57, 190,
    58, 190,
    59, 190,
    59, 189,
    60, 189,
    61, 189,
    62, 188,
    63, 188,
    64, 186,
    65, 186,
    67, 186,
    68, 185,
    69, 184,
    70, 184,
    71, 183,
    72, 182,
    73, 182,
    74, 181,
    75, 181,
    76, 180,
    76, 179,
    77, 178,
    78, 178,
    78, 177,
    79, 175,
    80, 174,
    81, 170,
    81, 169,
    82, 168,
    83, 166,
    84, 165,
    84, 164,
    85, 163,
    85, 162,
    86, 161,
    86, 160,
    86, 159,
    87, 158,
    87, 157,
    87, 156,
    88, 155,
    88, 154,
    88, 153,
    89, 153,
    89, 152,
    89, 152,
    90, 152,
    90, 151,
    91, 151,
    92, 151,
    93, 151,
    94, 151,
    94, 151,
    95, 151,
    96, 151,
    97, 151,
    97, 152,
    97, 153,
    97, 154,
    97, 154,
    97, 155,
    97, 156,
    97, 157,
    97, 159,
    97, 161,
    97, 162,
    96, 163,
    96, 165,
    95, 167,
    95, 168,
    95, 170,
    94, 170,
    94, 172,
    93, 173,
    93, 173,
    93, 174,
    91, 174,
    91, 175,
    91, 176,
    90, 176,
    90, 177,
    90, 179,
    90, 179,
    89, 179,
    89, 180,
    89, 181,
    88, 181,
    88, 182,
    88, 183,
    88, 184,
    89, 184,
    90, 184,
    91, 184,
    91, 184,
    92, 184,
    93, 184,
    94, 184,
    95, 184,
    96, 184,
    97, 184,
    98, 184,
    99, 184,
    101, 183,
    102, 183,
    104, 183,
    106, 183,
    109, 182,
    111, 182,
    113, 181,
    115, 180,
    117, 180,
    120, 179,
    121, 179,
    124, 178,
    125, 177,
    129, 176,
    131, 175,
    134, 174,
    135, 173,
    136, 173,
    137, 173,
    138, 173,
    139, 173,
    140, 173,
    141, 173,
    142, 173,
    142, 173,
    142, 174,
    143, 175,
    143, 176,
    143, 177,
    143, 177,
    143, 178,
    143, 179,
    144, 179,
    144, 179,
    144, 180,
    144, 181,
    143, 182,
    141, 184,
    139, 185,
    138, 186,
    136, 186,
    135, 187,
    134, 187,
    133, 188,
    132, 189,
    128, 190,
    125, 190,
    124, 191,
    122, 191,
    120, 192,
    118, 193,
    116, 194,
    113, 194,
    111, 195,
    109, 196,
    106, 197,
    104, 197,
    100, 198,
    98, 199,
    97, 200,
    93, 201,
    91, 202,
    89, 202,
    87, 203,
    82, 203,
    80, 203,
    77, 204,
    76, 204,
    72, 207,
    71, 208,
    69, 209,
    67, 209,
    65, 210,
    64, 210,
    63, 210,
    62, 210,
    61, 211,
    60, 211,
    59, 212,
    59, 212,
    59, 213,
    58, 214,
    57, 214,
    57, 215,
    56, 215,
    55, 216,
    55, 217,
    54, 217,
    54, 218,
    52, 218,
    51, 219,
    50, 220,
    50, 221,
    49, 221,
    49, 222,
    49, 223,
    49, 224,
    49, 224,
    48, 226,
    48, 227,
    48, 230,
    48, 231,
    47, 235,
    47, 236,
    47, 237,
    47, 238,
    47, 239,
    47, 240,
    47, 243,
    47, 245,
    47, 247,
    47, 249,
    47, 251,
    47, 253,
    47, 257,
    47, 259,
    47, 261,
    48, 263,
    48, 264,
    48, 266,
    48, 268,
    48, 269,
    48, 271,
    48, 273,
    49, 274,
    49, 276,
    49, 278,
    49, 283,
    50, 284,
    50, 286,
    50, 288,
    50, 289,
    50, 291,
    51, 292,
    51, 293,
    51, 296,
    51, 299,
    51, 300,
    51, 301,
    52, 302,
    52, 303,
    52, 305,
    52, 306,
    52, 308,
    52, 309,
    52, 311,
    53, 313,
    53, 316,
    53, 317,
    53, 319,
    53, 320,
    53, 322,
    53, 324,
    53, 325,
    53, 326,
    53, 328,
    53, 329,
    53, 332,
    53, 333,
    53, 334,
    54, 335,
    54, 336,
    54, 338,
    54, 339,
    55, 340,
    56, 342,
    56, 343,
    57, 344,
    58, 345,
    59, 346,
    60, 347,
    60, 347,
    62, 348,
    63, 348,
    64, 348,
    65, 348,
    66, 348,
    67, 348,
    68, 348,
    69, 348,
    70, 348,
    71, 348,
    73, 346,
    74, 345,
    76, 343,
    77, 342,
    79, 340,
    80, 338,
    81, 337,
    84, 334,
    85, 332,
    89, 328,
    90, 326,
    95, 320,
    97, 317,
    98, 315,
    100, 312,
    102, 309,
    104, 306,
    106, 302,
    108, 300,
    110, 298,
    111, 296,
    113, 294,
    114, 291,
    115, 289,
    116, 287,
    118, 284,
    120, 281,
    122, 278,
    123, 276,
    124, 274,
    124, 271,
    125, 269,
    126, 267,
    128, 265,
    129, 262,
    131, 259,
    132, 258,
    134, 255,
    134, 254,
    135, 252,
    137, 250,
    138, 247,
    140, 243,
    141, 241,
    142, 239,
    142, 238,
    142, 236,
    143, 236,
    145, 235,
    145, 235,
    146, 234,
    146, 233,
    147, 233,
    147, 232,
    147, 233,
    147, 234,
    147, 234,
    147, 235,
    147, 236,
    147, 237,
    147, 237,
    147, 238,
    147, 239,
    147, 241,
    147, 242,
    147, 243,
    146, 244,
    146, 246,
    146, 247,
    145, 249,
    144, 250,
    144, 252,
    143, 253,
    143, 255,
    142, 256,
    142, 257,
    142, 259,
    142, 260,
    141, 262,
    140, 263,
    140, 266,
    139, 268,
    139, 269,
    138, 271,
    138, 272,
    137, 274,
    136, 277,
    135, 278,
    134, 280,
    133, 283,
    131, 285,
    129, 287,
    129, 289,
    128, 291,
    127, 292,
    126, 294,
    125, 296,
    124, 297,
    123, 299,
    122, 302,
    120, 303,
    119, 306,
    118, 308,
    117, 310,
    117, 311,
    117, 312,
    116, 314,
    116, 315,
    115, 316,
    114, 318,
    112, 320,
    112, 323,
    111, 325,
    110, 326,
    109, 328,
    107, 329,
    106, 331,
    104, 332,
    104, 333,
    102, 334,
    101, 336,
    100, 337,
    99, 339,
    98, 340,
    97, 341,
    95, 341,
    94, 343,
    93, 345,
    91, 348,
    91, 350,
    89, 351,
    89, 351,
    88, 352,
    86, 353,
    86, 354,
    86, 355,
    85, 356,
    84, 357,
    83, 357,
    83, 358,
    82, 359,
    81, 359,
    80, 360,
    79, 361,
    78, 362,
    78, 363,
    77, 363,
    77, 364,
    76, 365,
    76, 368,
    75, 369,
    74, 371,
    73, 374,
    73, 375,
    72, 377,
    72, 379,
    71, 382,
    70, 384,
    70, 386,
    70, 388,
    69, 389,
    69, 391,
    69, 392,
    68, 394,
    68, 395,
    68, 396,
    68, 397,
    67, 399,
    67, 401,
    67, 401,
    67, 402,
    67, 403,
    67, 404,
    67, 405,
    67, 405,
    67, 406,
    67, 407,
    67, 408,
    67, 409,
    67, 411,
    67, 412,
    67, 414,
    67, 416,
    67, 418,
    67, 420,
    67, 421,
    67, 423,
    67, 424,
    67, 425,
    67, 425,
    68, 425,
    71, 425,
    73, 425,
    75, 425,
    77, 425,
    79, 423,
    81, 421,
    84, 420,
    87, 419,
    90, 417,
    93, 416,
    97, 414,
    105, 411,
    108, 409,
    112, 405,
    118, 401,
    122, 399,
    125, 397,
    129, 394,
    132, 392,
    134, 390,
    137, 387,
    141, 384,
    144, 382,
    148, 379,
    154, 373,
    156, 371,
    160, 369,
    162, 366,
    166, 364,
    169, 361,
    173, 359,
    176, 357,
    180, 354,
    182, 352,
    186, 349,
    189, 347,
    191, 345,
    193, 344,
    195, 342,
    198, 340,
    201, 339,
    203, 338,
    205, 337,
    207, 336,
    209, 335,
    209, 334,
    210, 334,
    211, 334,
    212, 334,
    213, 334,
    214, 334,
    215, 332,
    215, 332,
    216, 332,
    217, 332,
    219, 332,
    220, 332,
    220, 331,
    221, 331,
    222, 331,
    222, 331,
    223, 331,
    224, 331,
    224, 331,
    225, 331,
    226, 331,
    227, 331,
    227, 331,
    228, 331,
    229, 331,
    229, 331,
    230, 331,
    231, 331,
    232, 331,
    232, 332,
    232, 333,
    232, 334,
    232, 334,
    231, 334,
    230, 335,
    229, 335,
    229, 336,
    228, 336,
    227, 337,
    226, 337,
    226, 338,
    225, 338,
    224, 339,
    223, 339,
    223, 340,
    222, 340,
    221, 341,
    220, 341,
    218, 342,
    217, 342,
    216, 343,
    214, 344,
    212, 345,
    209, 347,
    208, 348,
    206, 348,
    204, 349,
    200, 352,
    198, 354,
    196, 357,
    194, 358,
    193, 359,
    192, 360,
    190, 361,
    189, 362,
    188, 363,
    185, 364,
    184, 365,
    183, 366,
    182, 366,
    180, 367,
    179, 367,
    177, 368,
    176, 369,
    175, 370,
    174, 370,
    174, 371,
    170, 374,
    168, 376,
    167, 378,
    165, 379,
    164, 380,
    163, 382,
    162, 383,
    159, 384,
    158, 385,
    157, 386,
    156, 387,
    156, 388,
    155, 389,
    153, 389,
    152, 390,
    150, 393,
    147, 397,
    146, 398,
    143, 400,
    142, 401,
    141, 402,
    140, 403,
    139, 403,
    138, 404,
    136, 405,
    135, 407,
    134, 408,
    133, 410,
    132, 411,
    131, 412,
    129, 414,
    127, 414,
    125, 416,
    123, 417,
    121, 419,
    119, 422,
    117, 425,
    115, 426,
    113, 427,
    112, 427,
    110, 428,
    109, 429,
    107, 430,
    106, 430,
    105, 431,
    103, 433,
    102, 433,
    100, 433,
    99, 434,
    98, 434,
    98, 434,
    97, 434,
    97, 435,
    96, 435,
    94, 435,
    93, 436,
    92, 436,
    91, 437,
    90, 438,
    89, 438,
    88, 438,
    86, 440,
    84, 441,
    83, 443,
    82, 444,
    81, 445,
    80, 446,
    79, 447,
    79, 448,
    79, 448,
    79, 452,
    78, 454,
    78, 457,
    77, 459,
    77, 461,
    77, 464,
    77, 466,
    77, 468,
    77, 470,
    76, 472,
    76, 475,
    76, 477,
    76, 479,
    76, 480,
    76, 482,
    76, 483,
    76, 485,
    76, 486,
    76, 488,
    76, 489,
    76, 490,
    76, 491,
    77, 492,
    77, 494,
    78, 495,
    78, 497,
    78, 498,
    80, 500,
    80, 501,
    80, 502,
    80, 503,
    81, 504,
    81, 505,
    82, 506,
    82, 508,
    83, 509,
    83, 510,
    84, 510,
    84, 511,
    84, 512,
    85, 516,
    86, 519,
    88, 523,
    89, 525,
    90, 530,
    92, 532,
    93, 534,
    95, 536,
    96, 537,
    97, 539,
    97, 541,
    99, 542,
    100, 543,
    101, 544,
    102, 546,
    103, 547,
    104, 548,
    105, 549,
    106, 550,
    108, 551,
    109, 553,
    110, 554,
    111, 555,
    114, 556,
    115, 557,
    117, 558,
    118, 559,
    119, 560,
    120, 561,
    122, 563,
    123, 563,
    124, 564,
    125, 565,
    125, 566,
    126, 567,
    127, 567,
    128, 568,
    129, 569,
    129, 569,
    130, 570,
    131, 570,
    132, 570,
    132, 571,
    133, 571,
    133, 572,
    134, 572,
    135, 573,
    135, 573,
    135, 574,
    136, 574,
    137, 574,
    137, 575,
    138, 575,
    138, 576,
    139, 576,
    139, 577,
    140, 577,
    141, 577,
    141, 578,
    142, 578,
    143, 578,
    143, 578,
    144, 578,
    145, 579,
    146, 579,
    146, 581,
    146, 581,
    146, 582,
    147, 582,
    147, 583,
    148, 583,
    148, 583,
    149, 583,
    149, 584,
    150, 584,
    150, 585,
    151, 585,
    151, 586,
    152, 586,
    152, 587,
    153, 587,
    153, 588,
    154, 588,
    154, 589,
    155, 589,
    156, 590,
    157, 591,
    159, 592,
    160, 592,
    161, 594,
    162, 594,
    162, 595,
    162, 596,
    162, 597,
    162, 598,
    162, 599,
    162, 600,
    162, 601,
    162, 602,
    162, 603,
    162, 604,
    161, 604,
    160, 604,
    159, 604,
    158, 604,
    158, 604,
    157, 604,
    157, 603,
    156, 603,
    154, 603,
    153, 603,
    150, 603,
    148, 603,
    145, 603,
    142, 603,
    141, 603,
    139, 603,
    137, 603,
    135, 603,
    133, 603,
    130, 601,
    130, 599,
    128, 597,
    127, 597,
    124, 597,
    122, 596,
    120, 596,
    119, 596,
    117, 595,
    114, 594,
    112, 593,
    110, 593,
    107, 592,
    105, 592,
    103, 592,
    100, 592,
    98, 592,
    97, 592,
    95, 592,
    94, 590,
    92, 588,
    92, 587,
    90, 586,
    90, 585,
    89, 585,
    89, 584,
    88, 583,
    87, 583,
    87, 582,
    86, 582,
    85, 582,
    84, 582,
    83, 582,
    83, 583,
    83, 584,
    83, 585,
    83, 585,
    83, 587,
    83, 589,
    83, 590,
    83, 591,
    83, 594,
    83, 596,
    83, 598,
    83, 600,
    83, 602,
    83, 604,
    83, 605,
    83, 606,
    83, 607,
    83, 609,
    83, 610,
    82, 612,
    82, 612,
    81, 613,
    81, 614,
    81, 615,
    80, 615,
    79, 615,
    78, 615,
    77, 614,
    77, 613,
    77, 612,
    75, 612,
    75, 611,
    74, 611,
    73, 610,
    73, 609,
    73, 608,
    72, 607,
    71, 606,
    70, 605,
    68, 603,
    66, 602,
    65, 601,
    63, 600,
    61, 599,
    60, 599,
    58, 599,
    58, 599,
    57, 599,
    56, 599,
    55, 599,
    54, 599,
    53, 599,
    52, 599,
    52, 599,
    51, 599,
    50, 599,
    49, 599,
    49, 599,
    48, 599,
    47, 599,
    46, 599,
    45, 599,
    45, 599,
    44, 599,
    43, 599,
    43, 598,
    42, 598,
    41, 598,
    41, 597,
    40, 597,
    39, 597,
    39, 596,
    38, 596,
    37, 596,
    37, 596,
    37, 595,
    36, 595,
    36, 594,
    35, 594,
    35, 594,
    35, 593,
    34, 593,
    33, 593,
    32, 593,
    31, 593,
    30, 593,
    30, 593,
    29, 593,
    28, 593,
    27, 593,
    25, 593,
    24, 593,
    23, 593,
    22, 593,
    21, 593,
    20, 593,
    19, 593,
    19, 593,
    19, 592,
    18, 592,
    16, 592,
    13, 590,
    12, 590,
    9, 588,
    8, 588,
    6, 587,
    5, 586,
    4, 586,
    4, 585,
    3, 585,
    3, 584,
    2, 584,
    1, 583,
    0, 582,
    0, 581
};
const int NUM = sizeof(pos)/sizeof(pos[0]);


//--------------------------------------------------------------
Arr Tree::getPoint(bool random){ //random point in tree
    if(random){ //near tree
        int r = ofRandom(2, NUM/2/1.5);
        Arr randomPoint;
        randomPoint.point[0] = ofPoint(pos[2*r-2], pos[2*r-1]);
        randomPoint.point[1] = ofPoint(pos[2*r], pos[2*r+1]);
        randomPoint.point[2] = ofPoint(pos[2*r+2], pos[2*r+3]);
        return randomPoint;
        
    }else{ //around tree
        /*
         int r = NUM/2/1.5;
         int jiku = pos[2*r+1];
         int rad = ofGetHeight()/4; //木の広がりの大きさ
         int y = ofRandom(jiku-rad, jiku+rad);
         int _x = sqrt( pow(rad, 2)-pow(y, 2) );
         int x = ofRandom(-_x, _x);
         Arr randomPoint;
         int w = 30;
         int h = 3;
         randomPoint.point[0] = ofPoint(ofRandom(0, w), ofRandom(-h, h));
         randomPoint.point[1] = ofPoint(x, y);
         randomPoint.point[2] = ofPoint(ofRandom(-w, 0), ofRandom(-h, h));
         return randomPoint;
         */
        int r = NUM/2/1.5;
        int centerY = pos[2*r+1]/2;
        int centerX = 0;
        int rad = ofGetHeight()/3;
        //leaf position
        int y = ofRandom(centerY-rad, centerY+rad);
        int x = ofRandom(20, centerX + sqrt(pow(rad, 2) - pow(y-centerY, 2)) );
        //leaf slope
        int w = 20;
        int h = 5;
        Arr randomPoint;
        randomPoint.point[0] = ofPoint(ofRandom(-w, 0), ofRandom(-h, h));
        randomPoint.point[1] = ofPoint(x, y);
        randomPoint.point[2] = ofPoint(ofRandom(0, w), ofRandom(-h, h));
        return randomPoint;
        
    }
}
//--------------------------------------------------------------
void Tree::draw(){
    
    ofPushMatrix();
    int skip = 5; //精度
    for(int j=0; j<4; j++){
        glBegin(GL_LINE_STRIP);
        for(int i=0; i<NUM/2/skip; i++){
            glVertex2f(pos[skip*2*i], pos[skip*2*i+1]);
        }
        glVertex2f(pos[NUM-2], pos[NUM-1]); //最後の一点
        glEnd();
        ofRotateY(90);
    }
    
    ofPopMatrix();
    
}







